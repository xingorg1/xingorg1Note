# ç”Ÿå‘½å‘¨æœŸ

<a name="3Cteh"></a>
# **16ç‰ˆæœ¬ä»¥å‰çš„ï¼š**
<a name="vix42"></a>
## ç”Ÿå‘½å‘¨æœŸæµç¨‹å›¾
<a name="7LMPJ"></a>
### ç»„ä»¶ä»ç”Ÿæˆåˆ°è¢«æŒ‚åœ¨åˆ°é¡µé¢ä¸Šçš„ä¸€ç³»åˆ—è¿‡ç¨‹
![image.png](https://cdn.nlark.com/yuque/0/2020/png/269022/1594644849526-784def5f-8db1-441a-812f-711a040363ea.png#align=left&display=inline&height=1436&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1436&originWidth=1478&size=209925&status=done&style=none&width=1478)<br />Â 
<a name="LR0U7"></a>
### æ ¹æ®æµç¨‹å›¾æ‰“å°çš„æ‰§è¡Œé¡ºåºå›¾ï¼š
![image.png](https://cdn.nlark.com/yuque/0/2020/png/269022/1594644851101-6b29710b-f2a0-45f0-abab-82c961013d01.png#align=left&display=inline&height=1600&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1600&originWidth=1884&size=890297&status=done&style=none&width=1884)<br />Â 
<a name="IMfoc"></a>
## æµç¨‹è®²è§£ï¼š
<a name="46Ycf"></a>
### åˆå§‹åŒ–æµç¨‹
| start | å¼€å§‹åˆ›å»ºç»„ä»¶ | åœ¨è¿™ä¸ªå‘¨æœŸä¸­åšçš„äº‹æƒ… |
| --- | --- | --- |
| æ£€æŸ¥ | æ£€æŸ¥ç»„ä»¶ä¸­æ˜¯å¦æœ‰é»˜è®¤çš„å±æ€§ã€æ˜¯å¦æœ‰å±æ€§æ ¡éªŒ | Â  |
| constructor | å¼€å§‹æ‰§è¡Œconstructoræ„é€ å‡½æ•°<br />ï¼ˆğŸ‘©â€ğŸ«è®²è§£ï¼šconstructoræ˜¯ç”Ÿå‘½å‘¨æœŸçš„ä¸€éƒ¨åˆ†ã€‚react.componentå°±æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®˜æ–¹æ–‡æ¡£å°±æ˜¯è¿™ä¹ˆå®šä¹‰çš„ã€‚ï¼‰ | æ„é€ ç±»ã€‚åœ¨è¿™é‡Œå¯ä»¥å†™ä¸€äº›çŠ¶æ€<br />å¯ä»¥è¿›è¡Œajaxæ•°æ®è¯·æ±‚ |
| componentWillMount | æ‰§è¡ŒcomponentWillMountç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚æ­¤æ—¶ç»„ä»¶å³å°†æŒ‚è½½åˆ°é¡µé¢ä¸Šã€‚<br />ï¼ˆç±»ä¼¼vueçš„beforeMounteï¼‰<br />ä¼šæœ‰å…³äºcomponentWillMountæ›´åçš„ä¿¡æ¯æç¤º<br />![image.png](https://cdn.nlark.com/yuque/0/2020/png/269022/1594646241614-7dccf9fa-ed0e-4ea0-a837-7047c4babde0.png#align=left&display=inline&height=358&margin=%5Bobject%20Object%5D&name=image.png&originHeight=358&originWidth=1354&size=129711&status=done&style=none&width=1354) | å¯ä»¥è¿›è¡Œajaxè¯·æ±‚<br />**ï¼ˆä½†æ˜¯reactå®˜æ–¹ä¸å»ºè®®ã€‚å› ä¸ºå¯èƒ½åæœŸä¼šä½¿ç”¨react Nativeæ—¶ä¼šä¸ä¹‹å‘ç”Ÿå†²çªã€‚è€Œä¸”å®˜æ–¹ç‰¹å¼ºç¡¬çš„æŠŠè¿™ä¸ªå‘¨æœŸå‡½æ•°ç»™ç§»é™¤äº†ã€‚16.3ç‰ˆæœ¬ä»¥åç§»é™¤äº†ï¼‰**<br />ä¹Ÿå¯ä»¥setStateä¸€ä¸‹ |
| render | æ‰§è¡Œrenderå‡½æ•°æ¸²æŸ“é¡µé¢ã€‚ | æ²¡å¿…è¦è¿›è¡Œajaxè¯·æ±‚<br />**ä¸èƒ½è°ƒç”¨setStateï¼Œå¦åˆ™ä¼šæ­»å¾ªç¯ã€‚å› ä¸ºsetStateä¼šè§¦å‘shouldComponentUpdateï¼Œè§¦å‘åå¦‚æœè¿”å›trueï¼Œåˆä¼šèµ°åˆ°renderé‡Œã€‚æ‰€ä»¥ï¼Œrenderé‡Œåªåšæ•°æ®æ¸²æŸ“ã€å±•ç¤ºå°±è¡Œï¼Œåˆ«è¿›è¡ŒsetState**<br />Â  |
| componentDidMount | æ‰§è¡ŒcomponentDidMountç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚æ­¤æ—¶ç»„ä»¶å·²ç»è¢«æŒ‚è½½åˆ°é¡µé¢ä¸­ã€‚<br />ï¼ˆç±»ä¼¼vueçš„mountedï¼‰ | å¯ä»¥å‘é€ajaxã€è®¾ç½®çŠ¶æ€ï¼ˆsetStateï¼‰çš„**æœ€å¥½çš„åœ°æ–¹** |

Â 
<a name="sDjo9"></a>
### ç»„ä»¶è¿è¡Œæµç¨‹
<a name="YysAo"></a>
#### stateå€¼è¢«æ”¹å˜
| stateè¢«æ›´æ”¹ | ç»„é—´è¿è¡Œä¸­ï¼Œstateè¢«æ›´æ”¹ | Â  |
| --- | --- | --- |
| è¿›è¡Œæé—®<br />æ˜¯å¦ç»§ç»­ï¼Ÿ | è§¦å‘**shouldComponentUpdate**å‡½æ•°ã€‚æé—®ç»„ä»¶æ˜¯å¦è¦è¿›è¡Œæ›´æ–°ã€‚<br />è¯¥å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šnextPropsã€nextStates<br />è¯¥å‡½æ•°éœ€è¦è¿”å›å¸ƒå°”å€¼æ¥**å›ç­”**æ˜¯å¦æ›´æ–°ï¼š<br />return falseä¸æ›´æ”¹ - æµç¨‹å›åˆ°stateè¢«æ›´æ”¹å‰ã€‚<br />return trueè¿›è¡Œæ›´æ”¹ - stateæ›´æ”¹ï¼Œæµç¨‹ç»§ç»­ã€‚ | å¯ä»¥åœ¨å‚æ•°é‡Œè¾¹çŸ¥é“å°†è¦æ›´æ–°çš„å€¼<br />**å¯ä»¥æ¯”è¾ƒå€¼ï¼Œå‘ç°éœ€è¦æ›´æ”¹çš„å€¼ä¸æ›´æ”¹å‰åä¸€è‡´æ—¶ï¼Œè¿”å›falseï¼Œä¸è§¦å‘æ›´æ–°ã€‚**<br />å› ä¸ºreactæ²¡æœ‰vueé‚£ä¹ˆæ™ºèƒ½ï¼Œä¸çŸ¥é“è¦æ›´æ”¹çš„å†…å®¹æ˜¯å¦çœŸçš„å‘ç”Ÿäº†æ”¹å˜ã€‚**åªè¦setStateå°±ä¼šè§¦å‘æ›´æ–°ã€åªè¦è§¦å‘äº†æ›´æ–°å°±ä¼šèµ°å‰©ä¸‹çš„æµç¨‹ã€‚è¿˜ä¼šå»å¯¹æ¯”è™šæ‹Ÿdomã€è€—è´¹æ€§èƒ½ ã€‚å…¶å†…éƒ¨çš„å­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¹Ÿä¼šè§¦å‘ä¸€éã€‚**<br />shouldComponentUpdate(nextProps,nextStates){<br />return nextStates.count !== this.state.count<br />} |
| Â  | ã€å›ç­”ã€‘ï¼šæ˜¯ | Â  |
| componentWillUpdate | æ‰§è¡ŒconponentWillUpdateç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚å‘ŠçŸ¥ç»„ä»¶å³å°†å¼€å§‹è¿›è¡Œæ›´æ–°ã€‚ | åƒä¸‡ä¸èƒ½è®¾ç½®çŠ¶æ€ï¼Œå› ä¸ºä¼šåˆå›åˆ°shouldComponentUpdateçš„æ­»å¾ªç¯ä¸­ã€‚<br />æ²¡å¿…è¦åšajaxè¯·æ±‚ï¼Œå³ä½¿åšäº†ä¹Ÿä¸èƒ½é‡æ–°setState<br />åŸºæœ¬ä¸Šæ²¡ä»€ä¹ˆç”¨ |
| render | ç»„é—´æ›´æ–°å®Œæ¯•ï¼Œæ‰§è¡Œrenderå‡½æ•°é‡æ–°æ¸²æŸ“é¡µé¢ã€‚ | ï¼ˆåŒä¸Šè¾¹çš„renderã€‚ï¼‰ |
| componentDidUpdate | æ‰§è¡ŒcomponentDidUpdateç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚å‘ŠçŸ¥ç»„ä»¶æ›´æ–°å¹¶æ¸²æŸ“å®Œæ¯•ã€‚æ­¤æ—¶æ›´æ–°è¿‡çš„ç»„ä»¶å·²ç»æ¸²æŸ“åˆ°é¡µé¢ä¸­ã€‚ | åƒä¸‡ä¸èƒ½è®¾ç½®çŠ¶æ€ï¼Œå› ä¸ºä¼šåˆå›åˆ°shouldComponentUpdateçš„æ­»å¾ªç¯ä¸­ã€‚<br />æ²¡å¿…è¦åšajaxè¯·æ±‚ï¼Œå³ä½¿åšäº†ä¹Ÿä¸èƒ½é‡æ–°setState<br />åŸºæœ¬ä¸Šæ²¡ä»€ä¹ˆç”¨ |
| Â  | ã€å¾€å¤ã€‘ï¼šå›åˆ°ç»„ä»¶è¿è¡ŒçŠ¶æ€ï¼ˆç­‰å¾…ï¼‰ | Â  |

Â 
<a name="RIQVn"></a>
#### propsæ”¹å˜ï¼Œé‡æ–°render
propså±æ€§æ˜¯ä»çˆ¶ç»„ä»¶ä¼ è¿‡æ¥çš„ã€‚å½“çˆ¶ç»„ä»¶æ”¹å˜äº†ä¼ é€’ç»™å­ç»„ä»¶çš„æ•°æ®æ—¶ï¼Œå­ç»„ä»¶å†…éƒ¨å°±ä¼šè§¦å‘è¯¥å‡½æ•°ã€‚<br />ä»¥ä¸‹æµç¨‹å‘ç”Ÿåœ¨å­ç»„ä»¶å†…éƒ¨ï¼šå­ç»„ä»¶å†…éƒ¨

| componentWillReceiveProps | æ‰§è¡ŒcomponentWillRecivePropsç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚å‘ŠçŸ¥çˆ¶ç»„ä»¶æ”¹å˜äº†propsçš„å€¼ã€‚<br />æ¥å—å‚æ•°ï¼šnextProps<br />Â <br />åˆå§‹åŒ–ä¸æ‰§è¡Œï¼Œåªæœ‰å½“propsæ”¹å˜æ—¶æ‰ä¼šæ‰§è¡Œ | å¯ä»¥è¿›è¡ŒçŠ¶æ€çš„è®¾ç½®ï¼š<br />å› ä¸ºå…¶å¯ä»¥æ¥å—ä¸€ä¸ªå‚æ•°nextPropsï¼Œç„¶åæŠŠå‚æ•°çš„å±æ€§å€¼setStateåˆ°this.stateèº«ä¸Š<br />å¯ä»¥å‘é€ajaxè¯·æ±‚ï¼š<br />åŒä¸Š<br />**ä½†æ˜¯å®˜æ–¹ä¸å»ºè®®è¿™ä¹ˆåšï¼Œè®¤ä¸ºæ˜¯ä¸åˆç†çš„ã€‚æ‰€ä»¥åœ¨16.3ä»¥åçš„ç‰ˆæœ¬ä¸­ç§»é™¤äº†ï¼Œè¯¥å‡½æ•°ä¸èƒ½ä½¿ç”¨äº†ã€‚** |
| --- | --- | --- |
| Â  | ã€å¾ªç¯ã€‘ï¼šé‡èµ°stateå€¼è¢«æ›´æ”¹çš„æµç¨‹å¦‚ä¸‹ï¼š | Â  |
| è¿›è¡Œæé—®<br />æ˜¯å¦ç»§ç»­ï¼Ÿ | è§¦å‘shouldComponentUpdateå‡½æ•°ã€‚æé—®ç»„ä»¶æ˜¯å¦è¦è¿›è¡Œæ›´æ–°ã€‚<br />è¯¥å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šnextPropsã€nextStates<br />è¯¥å‡½æ•°éœ€è¦è¿”å›å¸ƒå°”å€¼æ¥**å›ç­”**æ˜¯å¦æ›´æ–°ï¼š<br />return falseä¸æ›´æ”¹ - æµç¨‹å›åˆ°stateè¢«æ›´æ”¹å‰ã€‚<br />return trueè¿›è¡Œæ›´æ”¹ - stateæ›´æ”¹ï¼Œæµç¨‹ç»§ç»­ã€‚ | Â  |
| Â  | ã€å›ç­”ã€‘ï¼šæ˜¯ | Â  |
| componentWillUpdate | æ‰§è¡ŒconponentWillUpdateç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚å‘ŠçŸ¥ç»„ä»¶å³å°†å¼€å§‹è¿›è¡Œæ›´æ–°ã€‚ | **åœ¨16.3ä»¥åçš„ç‰ˆæœ¬ä¸­ç§»é™¤äº†** |
| render | ç»„é—´æ›´æ–°å®Œæ¯•ï¼Œæ‰§è¡Œrenderå‡½æ•°é‡æ–°æ¸²æŸ“é¡µé¢ã€‚ | Â  |
| componentDidUpdate | æ‰§è¡ŒcomponentDidUpdateç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚å‘ŠçŸ¥ç»„ä»¶æ›´æ–°å¹¶æ¸²æŸ“å®Œæ¯•ã€‚æ­¤æ—¶æ›´æ–°è¿‡çš„ç»„ä»¶å·²ç»æ¸²æŸ“åˆ°é¡µé¢ä¸­ã€‚ | Â  |
| Â  | ã€å¾€å¤ã€‘ï¼šå›åˆ°ç»„ä»¶è¿è¡ŒçŠ¶æ€ï¼ˆç­‰å¾…ï¼‰ | Â  |

Â 
<a name="b6EfU"></a>
#### ç»„ä»¶è¢«ç§»é™¤ã€é”€æ¯
| componentWillUnmount | æ‰§è¡ŒcomponentWillUnmountç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚å‘ŠçŸ¥å³å°†é”€æ¯ç»„ä»¶ã€‚ | é”€æ¯ç»„ä»¶å‰ï¼Œå¯ä»¥å…ˆå‘ŠçŸ¥ç”¨æˆ·ä¹‹ç±»çš„ã€‚ |
| --- | --- | --- |
| Â  | ã€é”€æ¯ã€‘ï¼šç»„ä»¶é”€æ¯å®Œæ¯•ã€‚ | Â  |

Â 
<a name="92kVM"></a>
## ä»£ç æ¼”ç¤ºï¼š
è§github (https://github.com/xingorg1/JuFengGuo/tree/master/advanceCourse/react/3-react_lifecycle/src/components/before_16.3)<br />Â 
<a name="HYr1J"></a>
## ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°çš„åŠŸèƒ½ï¼š
æ¯ä¸ªç”Ÿå‘½å‘¨æœŸéƒ½å¯ä»¥ç”¨æ¥å¹²ä»€ä¹ˆï¼Ÿè¯¦è§ä¸Šè¿°è¡¨æ ¼ä¸­å„å¯¹åº”åˆ—<br />Â 

# **16.3ç‰ˆæœ¬ä»¥åçš„ï¼š**
Â <br />**åŸºæœ¬æŠŠâ€˜xxWillxxxâ€™ç­‰ï¼Œå¸¦â€œWillâ€çš„é’©å­å‡½æ•°éƒ½åˆ æ‰äº†**<br />Â 
<a name="7EQbU"></a>
## ç”Ÿå‘½å‘¨æœŸæµç¨‹å›¾
<a name="4aB8L"></a>
### ç»„ä»¶ä»ç”Ÿæˆåˆ°è¢«æŒ‚åœ¨åˆ°é¡µé¢ä¸Šçš„ä¸€ç³»åˆ—è¿‡ç¨‹ã€‚
![image.png](https://cdn.nlark.com/yuque/0/2020/png/269022/1594644849550-92532930-2374-49a4-95e7-a5d6e31ae278.png#align=left&display=inline&height=1646&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1646&originWidth=1218&size=160782&status=done&style=none&width=1218)
<a name="jdLRr"></a>
### æ ¹æ®æµç¨‹å›¾æ‰“å°çš„æ‰§è¡Œé¡ºåºå›¾ï¼š
![image.png](https://cdn.nlark.com/yuque/0/2020/png/269022/1594644851155-8e5f53ae-0f53-4d30-9952-60d49126710a.png#align=left&display=inline&height=1832&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1832&originWidth=1770&size=961433&status=done&style=none&width=1770)<br />Â 
<a name="wE8Tc"></a>
## æµç¨‹è®²è§£ï¼š
<a name="PdxtH"></a>
### åˆå§‹åŒ–æµç¨‹
| start | å¼€å§‹åˆ›å»ºç»„ä»¶ | åœ¨è¿™ä¸ªå‘¨æœŸä¸­åšçš„äº‹æƒ… |
| --- | --- | --- |
| æ£€æŸ¥ | æ£€æŸ¥ç»„ä»¶ä¸­æ˜¯å¦æœ‰é»˜è®¤çš„å±æ€§ã€æ˜¯å¦æœ‰å±æ€§æ ¡éªŒ | Â  |
| constructor | å¼€å§‹æ‰§è¡Œconstructoræ„é€ å‡½æ•°<br />ï¼ˆğŸ‘©â€ğŸ«è®²è§£ï¼šconstructoræ˜¯ç”Ÿå‘½å‘¨æœŸçš„ä¸€éƒ¨åˆ†ã€‚react.componentå°±æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®˜æ–¹æ–‡æ¡£å°±æ˜¯è¿™ä¹ˆå®šä¹‰çš„ã€‚ï¼‰ | æ„é€ ç±»ã€‚åœ¨è¿™é‡Œå¯ä»¥å†™ä¸€äº›çŠ¶æ€<br />å¯ä»¥è¿›è¡Œajaxæ•°æ®è¯·æ±‚ï¼ˆ[è¦ä¸è¦åœ¨constructoré‡Œè·å–æ•°æ®](https://segmentfault.com/q/1010000008133309)ï¼‰ |
| static getDerivedStateFromProps(props,state) | æ‰§è¡Œä¸€ä¸ªé™æ€çš„æ–¹æ³•ã€‚ä»å±æ€§ä¸­å»è·å¾—çŠ¶æ€**ã€‚**<br />**åˆå§‹åŒ–å°±ä¼šæ‰§è¡Œ**<br />**è¿™æ ·ï¼Œæ›´æ”¹stateå’Œæ›´æ”¹propsï¼Œå°±ä¸ä¼šèµ°ä¸¤å¥—è·¯çº¿äº†ï¼Œè€Œæ˜¯éƒ½èµ°è¿™ä¸€ä¸ªã€‚**<br />**å¿…é¡»è¿”å›ä¸€ä¸ªstateçš„å¯¹è±¡ã€‚å¦åˆ™æŠ¥é”™å¦‚ä¸‹**<br />Warning: Father.getDerivedStateFromProps(): A valid state object   (or null) must be returned. You have returned undefined.<br />**returnçš„è¿”å›å€¼ï¼Œå°±ä¼šæ”¾åˆ°ç»„ä»¶çš„stateçŠ¶æ€ä¸­**<br />Â <br />å‚æ•°ï¼špropsã€stateï¼Œå°±æ˜¯å½“å‰ç»„ä»¶çš„å±æ€§çŠ¶æ€å€¼å’Œå±æ€§å€¼ | Â  |
| render | æ‰§è¡Œrenderå‡½æ•°æ¸²æŸ“é¡µé¢ã€‚ | æ²¡å¿…è¦è¿›è¡Œajaxè¯·æ±‚<br />**ä¸èƒ½è°ƒç”¨setStateï¼Œå¦åˆ™ä¼šæ­»å¾ªç¯ã€‚å› ä¸ºsetStateä¼šè§¦å‘shouldComponentUpdateï¼Œè§¦å‘åå¦‚æœè¿”å›trueï¼Œåˆä¼šèµ°åˆ°renderé‡Œã€‚æ‰€ä»¥ï¼Œrenderé‡Œåªåšæ•°æ®æ¸²æŸ“ã€å±•ç¤ºå°±è¡Œï¼Œåˆ«è¿›è¡ŒsetState**<br />Â  |
| componentDidMount | æ‰§è¡ŒcomponentDidMountç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚æ­¤æ—¶ç»„ä»¶å·²ç»è¢«æŒ‚è½½åˆ°é¡µé¢ä¸­ã€‚<br />ï¼ˆç±»ä¼¼vueçš„mountedï¼‰ | å¯ä»¥å‘é€ajaxã€è®¾ç½®çŠ¶æ€ï¼ˆsetStateï¼‰çš„**æœ€å¥½çš„åœ°æ–¹** |

Â 
<a name="p9C9q"></a>
### ç»„ä»¶è¿è¡Œæµç¨‹
<a name="3LaLJ"></a>
#### state æˆ– propså…¶ä¸­ä»»æ„ä¸€ä¸ªè¢«æ”¹å˜å
| static getDerivedStateFromProps(props,state) | stateæˆ–propsæ›´æ”¹ï¼Œéƒ½ä¼šæ‰§è¡Œè¿™ä¸ªé™æ€çš„æ–¹æ³•ã€‚ä»å±æ€§ä¸­å»è·å¾—çŠ¶æ€**ã€‚**<br />**è¿™æ ·ï¼Œæ›´æ”¹stateå’Œæ›´æ”¹propsï¼Œå°±ä¸ä¼šèµ°ä¸¤å¥—è·¯çº¿äº†ï¼Œè€Œæ˜¯éƒ½èµ°è¿™ä¸€ä¸ªã€‚**<br />**å¿…é¡»è¿”å›ä¸€ä¸ªstateçš„å¯¹è±¡ã€‚å¦åˆ™æŠ¥é”™å¦‚ä¸‹**<br />Warning: Father.getDerivedStateFromProps(): A valid state object   (or null) must be returned. You have returned undefined. | Â  |
| --- | --- | --- |
| è¿›è¡Œæé—®<br />æ˜¯å¦ç»§ç»­ï¼Ÿ | è§¦å‘shouldComponentUpdateå‡½æ•°ã€‚æé—®ç»„ä»¶æ˜¯å¦è¦è¿›è¡Œæ›´æ–°ã€‚<br />è¯¥å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šnextPropsã€nextStates<br />è¯¥å‡½æ•°éœ€è¦è¿”å›å¸ƒå°”å€¼æ¥**å›ç­”**æ˜¯å¦æ›´æ–°ï¼š<br />return falseä¸æ›´æ”¹ - æµç¨‹å›åˆ°stateè¢«æ›´æ”¹å‰ã€‚<br />return trueè¿›è¡Œæ›´æ”¹ - stateæ›´æ”¹ï¼Œæµç¨‹ç»§ç»­ã€‚ | å¯ä»¥åœ¨å‚æ•°é‡Œè¾¹çŸ¥é“å°†è¦æ›´æ–°çš„å€¼<br />**å¯ä»¥æ¯”è¾ƒå€¼ï¼Œå‘ç°éœ€è¦æ›´æ”¹çš„å€¼ä¸æ›´æ”¹å‰åä¸€è‡´æ—¶ï¼Œè¿”å›falseï¼Œä¸è§¦å‘æ›´æ–°ã€‚**<br />å› ä¸ºreactæ²¡æœ‰vueé‚£ä¹ˆæ™ºèƒ½ï¼Œä¸çŸ¥é“è¦æ›´æ”¹çš„å†…å®¹æ˜¯å¦çœŸçš„å‘ç”Ÿäº†æ”¹å˜ã€‚**åªè¦setStateå°±ä¼šè§¦å‘æ›´æ–°ã€åªè¦è§¦å‘äº†æ›´æ–°å°±ä¼šèµ°å‰©ä¸‹çš„æµç¨‹ã€‚è¿˜ä¼šå»å¯¹æ¯”è™šæ‹Ÿdomã€è€—è´¹æ€§èƒ½ ã€‚å…¶å†…éƒ¨çš„å­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¹Ÿä¼šè§¦å‘ä¸€éã€‚**<br />shouldComponentUpdate(nextProps,nextStates){<br />return nextStates.count !== this.state.count<br />} |
| Â  | ã€å›ç­”ã€‘ï¼šæ˜¯ | Â  |
| render | ç»„ä»¶æ›´æ–°å®Œæ¯•ï¼Œæ‰§è¡Œrenderå‡½æ•°é‡æ–°æ¸²æŸ“é¡µé¢ã€‚ | ï¼ˆåŒä¸Šè¾¹çš„renderã€‚ï¼‰ |
| getSnapshotBeforeUpdate(prevProps,prevState) | æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œè·å–ä¹‹å‰çŠ¶æ€çš„ä¸€ä¸ªå¿«ç…§ã€‚<br />**éœ€è¦æœ‰è¿”å›å€¼ã€‚å…¶è¿”å›å€¼ä¾›ä¸‹è¾¹çš„é’©å­å‡½æ•°componentDidUpdateä¸­æ¥å—å¹¶ä½¿ç”¨ã€‚**<br />![image.png](https://cdn.nlark.com/yuque/0/2020/png/269022/1594646205248-df5829a2-36b1-4e06-891e-6287328f9c64.png#align=left&display=inline&height=388&margin=%5Bobject%20Object%5D&name=image.png&originHeight=388&originWidth=932&size=90581&status=done&style=none&width=932)<br />**æ‰€ä»¥è¯¥å‡½æ•°å¿…é¡»å’ŒcomponentDidUpdateå‡½æ•°å†™åœ¨ä¸€èµ·ã€‚** | Â  |
| componentDidUpdate | æ‰§è¡ŒcomponentDidUpdateç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚å‘ŠçŸ¥ç»„ä»¶æ›´æ–°å¹¶æ¸²æŸ“å®Œæ¯•ã€‚æ­¤æ—¶æ›´æ–°è¿‡çš„ç»„ä»¶å·²ç»æ¸²æŸ“åˆ°é¡µé¢ä¸­ã€‚<br />**å¯æ”¯æŒæ¥å—ä¸‰ä¸ªå‚æ•°ã€‚åˆ†åˆ«æ˜¯prevPropsã€prevStateã€snapShot**<br />**å…¶ä¸­ï¼ŒsnapShotæ˜¯getSnapshotBeforeUpdateçš„è¿”å›å€¼**<br />**![image.png](https://cdn.nlark.com/yuque/0/2020/png/269022/1594646184087-766b698c-c5aa-4fb1-a460-d72dd20d7e7a.png#align=left&display=inline&height=176&margin=%5Bobject%20Object%5D&name=image.png&originHeight=176&originWidth=2068&size=89811&status=done&style=none&width=2068) | åƒä¸‡ä¸èƒ½è®¾ç½®çŠ¶æ€ï¼Œå› ä¸ºä¼šåˆå›åˆ°shouldComponentUpdateçš„æ­»å¾ªç¯ä¸­ã€‚<br />æ²¡å¿…è¦åšajaxè¯·æ±‚ï¼Œå³ä½¿åšäº†ä¹Ÿä¸èƒ½é‡æ–°setState<br />åŸºæœ¬ä¸Šæ²¡ä»€ä¹ˆç”¨ |
| Â  | ã€å¾€å¤ã€‘ï¼šå›åˆ°ç»„ä»¶è¿è¡ŒçŠ¶æ€ï¼ˆç­‰å¾…ï¼‰ | Â  |



<a name="Eyoir"></a>
#### ç»„ä»¶è¢«ç§»é™¤ã€é”€æ¯
| componentWillUnmount | æ‰§è¡ŒcomponentWillUnmountç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚å‘ŠçŸ¥å³å°†é”€æ¯ç»„ä»¶ã€‚ | Â  |
| --- | --- | --- |
| Â  | ã€é”€æ¯ã€‘ï¼šç»„ä»¶é”€æ¯å®Œæ¯•ã€‚ | Â  |

Â 
<a name="semyH"></a>
## ä»£ç æ¼”ç¤ºï¼š
è§github (https://github.com/xingorg1/JuFengGuo/tree/master/advanceCourse/react/3-react_lifecycle/src/components/after_16.3)<br />Â 
<a name="JCM70"></a>
## ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°çš„åŠŸèƒ½ï¼š
æ¯ä¸ªç”Ÿå‘½å‘¨æœŸéƒ½å¯ä»¥ç”¨æ¥å¹²ä»€ä¹ˆï¼Ÿè¯¦è§ä¸Šè¿°è¡¨æ ¼ä¸­å„å¯¹åº”åˆ—
